{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\kgrob\\\\Documents\\\\Proyectos de programaci\\xF3n\\\\OrgBoat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\kgrob\\\\Documents\\\\Proyectos de programaci\\xF3n\\\\OrgBoat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import socketIOClient from\"socket.io-client\";import Navigator from\"./Navigator.js\";import ChatSidebar from\"./ChatSidebar\";import ArchiveSidebar from\"./ArchiveSidebar\";import FriendSidebar from\"./FriendSidebar\";import FavoriteSidebar from\"./FavoriteSidebar\";import ChatBody from\"./ChatBody\";import Profile from\"./Profile.js\";import EditProfile from\"./EditProfile\";var ENDPOINT=\"http://localhost:5000/\";function Workspace(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),clicked=_useState4[0],setClicked=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userProfile=_useState6[0],setuserProfile=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),chatMessages=_useState8[0],setChatMessages=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),show=_useState10[0],setShow=_useState10[1];var chats;var currentPage=0;var socket=socketIOClient(ENDPOINT);useEffect(function(){socket.emit(\"get chats\");console.log(response);console.log(\"uid\",clicked);socket.on(\"retrieve messages\",function(response){setChatMessages(function(chatMessages){return[].concat(_toConsumableArray(chatMessages),[response]);});console.log(\"messages\",response);});currentPage=currentPage+1;socket.emit(\"get messages\",{id:clicked,page:currentPage});},[clicked,ENDPOINT]);useEffect(function(){socket.on(\"chat message\",function(response){setChatMessages(function(chatMessages){return[].concat(_toConsumableArray(chatMessages),[response]);});console.log(\"estesi\",response);socket.emit(\"get chats\");});socket.on(\"retrieve chats\",function(response){setResponse(response);});},[]);console.log(\"messages\",chatMessages);var my_uid=response.my_uid;return/*#__PURE__*/React.createElement(\"div\",{className:\"layout\"},/*#__PURE__*/React.createElement(EditProfile,{show:show,handleClose:setShow}),/*#__PURE__*/React.createElement(Navigator,{my_uid:my_uid,setuserProfile:setuserProfile,setEditProfile:setShow}),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-group\"},/*#__PURE__*/React.createElement(ChatSidebar,{clicked:clicked,setClicked:setClicked,response:response// ArchiveChat={ArchiveChat}\n// profiledata={profiledata}\n// setuserProfile={setuserProfile}\n}),/*#__PURE__*/React.createElement(ArchiveSidebar,{clicked:clicked,setClicked:setClicked,response:response}),/*#__PURE__*/React.createElement(FriendSidebar,null),/*#__PURE__*/React.createElement(FavoriteSidebar,null)),/*#__PURE__*/React.createElement(ChatBody,{messages:chatMessages// SendMessage={SendMessage}\n,my_uid:my_uid,clicked:clicked}),/*#__PURE__*/React.createElement(Profile,{userProfile:userProfile})));}export default Workspace;","map":{"version":3,"sources":["C:/Users/kgrob/Documents/Proyectos de programaciÃ³n/OrgBoat/src/components/Workspace.js"],"names":["React","useState","useEffect","socketIOClient","Navigator","ChatSidebar","ArchiveSidebar","FriendSidebar","FavoriteSidebar","ChatBody","Profile","EditProfile","ENDPOINT","Workspace","response","setResponse","clicked","setClicked","userProfile","setuserProfile","chatMessages","setChatMessages","show","setShow","chats","currentPage","socket","emit","console","log","on","id","page","my_uid"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport Navigator from \"./Navigator.js\";\r\nimport ChatSidebar from \"./ChatSidebar\";\r\nimport ArchiveSidebar from \"./ArchiveSidebar\";\r\nimport FriendSidebar from \"./FriendSidebar\";\r\nimport FavoriteSidebar from \"./FavoriteSidebar\";\r\nimport ChatBody from \"./ChatBody\";\r\nimport Profile from \"./Profile.js\";\r\nimport EditProfile from \"./EditProfile\";\r\nconst ENDPOINT = \"http://localhost:5000/\";\r\n\r\nfunction Workspace() {\r\n  const [response, setResponse] = useState([]);\r\n  const [clicked, setClicked] = useState(0);\r\n  const [userProfile, setuserProfile] = useState([]);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  const [show, setShow] = useState(false);\r\n\r\n  let chats;\r\n  let currentPage = 0;\r\n  const socket = socketIOClient(ENDPOINT);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"get chats\");\r\n    console.log(response);\r\n    console.log(\"uid\", clicked);\r\n\r\n    socket.on(\"retrieve messages\", (response) => {\r\n      setChatMessages((chatMessages) => [...chatMessages, response]);\r\n      console.log(\"messages\", response);\r\n    });\r\n    currentPage = currentPage + 1;\r\n    socket.emit(\"get messages\", { id: clicked, page: currentPage });\r\n  }, [clicked, ENDPOINT]);\r\n\r\n  useEffect(() => {\r\n    socket.on(\"chat message\", (response) => {\r\n      setChatMessages((chatMessages) => [...chatMessages, response]);\r\n      console.log(\"estesi\", response);\r\n      socket.emit(\"get chats\");\r\n    });\r\n\r\n    socket.on(\"retrieve chats\", (response) => {\r\n      setResponse(response);\r\n    });\r\n  }, []);\r\n\r\n  console.log(\"messages\", chatMessages);\r\n  let my_uid = response.my_uid;\r\n\r\n  return (\r\n    <div className=\"layout\">\r\n      <EditProfile show={show} handleClose={setShow} />\r\n      <Navigator\r\n        my_uid={my_uid}\r\n        setuserProfile={setuserProfile}\r\n        setEditProfile={setShow}\r\n      />\r\n      <div className=\"content\">\r\n        <div className=\"sidebar-group\">\r\n          <ChatSidebar\r\n            clicked={clicked}\r\n            setClicked={setClicked}\r\n            response={response}\r\n            // ArchiveChat={ArchiveChat}\r\n            // profiledata={profiledata}\r\n            // setuserProfile={setuserProfile}\r\n          />\r\n          <ArchiveSidebar\r\n            clicked={clicked}\r\n            setClicked={setClicked}\r\n            response={response}\r\n          />\r\n          <FriendSidebar />\r\n          <FavoriteSidebar />\r\n        </div>\r\n        <ChatBody\r\n          messages={chatMessages}\r\n          // SendMessage={SendMessage}\r\n          my_uid={my_uid}\r\n          clicked={clicked}\r\n        />\r\n        <Profile userProfile={userProfile} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Workspace;\r\n"]},"metadata":{},"sourceType":"module"}