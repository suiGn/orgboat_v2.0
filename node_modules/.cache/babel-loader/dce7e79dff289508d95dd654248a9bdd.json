{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\kgrob\\\\Documents\\\\Proyectos de programaci\\xF3n\\\\OrgBoat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\kgrob\\\\Documents\\\\Proyectos de programaci\\xF3n\\\\OrgBoat\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import socketIOClient from\"socket.io-client\";import\"feather-icons\";import Navigator from\"./Navigator.js\";import ChatSidebar from\"./ChatSidebar\";import ArchiveSidebar from\"./ArchiveSidebar\";import FriendSidebar from\"./FriendSidebar\";import FavoriteSidebar from\"./FavoriteSidebar\";import ChatBody from\"./ChatBody\";import Profile from\"./Profile.js\";var ENDPOINT=\"http://localhost:5000/\";function Workspace(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),response=_useState2[0],setResponse=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),clicked=_useState4[0],setClicked=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),userProfile=_useState6[0],setuserProfile=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),chatMessages=_useState8[0],setChatMessages=_useState8[1];var chats;var currentPage=0;var socket=socketIOClient(ENDPOINT);useEffect(function(){socket.emit(\"get chats\");console.log(response);socket.on(\"retrieve chats\",function(response){setResponse(response);console.log(response);});console.log(\"uid\",clicked);socket.on(\"retrieve messages\",function(response){setChatMessages(function(chatMessages){return[].concat(_toConsumableArray(chatMessages),[response]);});// setChatMessages(response);\n// socket.emit(\"get chats\");\nconsole.log(\"messages\",response);});currentPage=currentPage+1;socket.emit(\"get messages\",{id:clicked,page:currentPage});},[clicked,ENDPOINT]);useEffect(function(){// if (clicked != 0) {\nconsole.log(\"uid\",clicked);socket.on(\"retrieve messages\",function(response){setChatMessages(function(chatMessages){return[].concat(_toConsumableArray(chatMessages),[response]);});console.log(\"messages\",response);});currentPage=currentPage+1;socket.on(\"chat message\",function(response){console.log(\"messages 1\",response);});// }\n},[chatMessages]);console.log(clicked);var my_uid=response.my_uid;function SendMessage(event,newMessage,chat_uid){event.preventDefault();// const socket = socketIOClient(ENDPOINT);\nif(newMessage.length>0){socket.emit(\"chat message\",{chat:chat_uid,message:newMessage});socket.emit(\"get chats\");socket.emit(\"get messages\",{id:chat_uid,page:currentPage});// setnewMessage(\"\");\n}}function ArchiveChat(chat_selected){// const socket = socketIOClient(ENDPOINT);\nsocket.emit(\"archived chat\",{chat:chat_selected});socket.on(\"archived response\",function(){socket.emit(\"get chats\");});}function profiledata(id){// const socket = socketIOClient(ENDPOINT);\nsocket.emit(\"ViewProfile\",{id:id});socket.on(\"retrieve viewprofile\",function(data){setuserProfile(data);});}return/*#__PURE__*/React.createElement(\"div\",{className:\"layout\"},/*#__PURE__*/React.createElement(Navigator,{my_uid:my_uid,setuserProfile:setuserProfile}),/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebar-group\"},/*#__PURE__*/React.createElement(ChatSidebar,{clicked:clicked,setClicked:setClicked,response:response,ArchiveChat:ArchiveChat,profiledata:profiledata// setuserProfile={setuserProfile}\n}),/*#__PURE__*/React.createElement(ArchiveSidebar,{clicked:clicked,setClicked:setClicked,response:response}),/*#__PURE__*/React.createElement(FriendSidebar,null),/*#__PURE__*/React.createElement(FavoriteSidebar,null)),/*#__PURE__*/React.createElement(ChatBody,{messages:chatMessages,SendMessage:SendMessage,my_uid:my_uid,clicked:clicked}),/*#__PURE__*/React.createElement(Profile,{userProfile:userProfile})));}export default Workspace;","map":{"version":3,"sources":["C:/Users/kgrob/Documents/Proyectos de programaciÃ³n/OrgBoat/src/components/Workspace.js"],"names":["React","useState","useEffect","socketIOClient","Navigator","ChatSidebar","ArchiveSidebar","FriendSidebar","FavoriteSidebar","ChatBody","Profile","ENDPOINT","Workspace","response","setResponse","clicked","setClicked","userProfile","setuserProfile","chatMessages","setChatMessages","chats","currentPage","socket","emit","console","log","on","id","page","my_uid","SendMessage","event","newMessage","chat_uid","preventDefault","length","chat","message","ArchiveChat","chat_selected","profiledata","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport {} from \"feather-icons\";\r\nimport Navigator from \"./Navigator.js\";\r\nimport ChatSidebar from \"./ChatSidebar\";\r\nimport ArchiveSidebar from \"./ArchiveSidebar\";\r\nimport FriendSidebar from \"./FriendSidebar\";\r\nimport FavoriteSidebar from \"./FavoriteSidebar\";\r\nimport ChatBody from \"./ChatBody\";\r\nimport Profile from \"./Profile.js\";\r\nconst ENDPOINT = \"http://localhost:5000/\";\r\n\r\nfunction Workspace() {\r\n  const [response, setResponse] = useState([]);\r\n  const [clicked, setClicked] = useState(0);\r\n  const [userProfile, setuserProfile] = useState([]);\r\n  const [chatMessages, setChatMessages] = useState([]);\r\n  let chats;\r\n  let currentPage = 0;\r\n  const socket = socketIOClient(ENDPOINT);\r\n  useEffect(() => {\r\n    socket.emit(\"get chats\");\r\n    console.log(response);\r\n    socket.on(\"retrieve chats\", (response) => {\r\n      setResponse(response);\r\n      console.log(response);\r\n    });\r\n    console.log(\"uid\", clicked);\r\n\r\n    socket.on(\"retrieve messages\", (response) => {\r\n      setChatMessages((chatMessages) => [...chatMessages, response]);\r\n      // setChatMessages(response);\r\n      // socket.emit(\"get chats\");\r\n      console.log(\"messages\", response);\r\n    });\r\n    currentPage = currentPage + 1;\r\n    socket.emit(\"get messages\", { id: clicked, page: currentPage });\r\n  }, [clicked, ENDPOINT]);\r\n\r\n  useEffect(() => {\r\n    // if (clicked != 0) {\r\n    console.log(\"uid\", clicked);\r\n    socket.on(\"retrieve messages\", (response) => {\r\n      setChatMessages((chatMessages) => [...chatMessages, response]);\r\n\r\n      console.log(\"messages\", response);\r\n    });\r\n    currentPage = currentPage + 1;\r\n    socket.on(\"chat message\", (response) => {\r\n      console.log(\"messages 1\", response);\r\n    });\r\n    // }\r\n  }, [chatMessages]);\r\n\r\n  console.log(clicked);\r\n  let my_uid = response.my_uid;\r\n\r\n  function SendMessage(event, newMessage, chat_uid) {\r\n    event.preventDefault();\r\n\r\n    // const socket = socketIOClient(ENDPOINT);\r\n    if (newMessage.length > 0) {\r\n      socket.emit(\"chat message\", { chat: chat_uid, message: newMessage });\r\n      socket.emit(\"get chats\");\r\n      socket.emit(\"get messages\", { id: chat_uid, page: currentPage });\r\n      // setnewMessage(\"\");\r\n    }\r\n  }\r\n\r\n  function ArchiveChat(chat_selected) {\r\n    // const socket = socketIOClient(ENDPOINT);\r\n    socket.emit(\"archived chat\", { chat: chat_selected });\r\n    socket.on(\"archived response\", function () {\r\n      socket.emit(\"get chats\");\r\n    });\r\n  }\r\n\r\n  function profiledata(id) {\r\n    // const socket = socketIOClient(ENDPOINT);\r\n    socket.emit(\"ViewProfile\", { id: id });\r\n    socket.on(\"retrieve viewprofile\", function (data) {\r\n      setuserProfile(data);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"layout\">\r\n      <Navigator my_uid={my_uid} setuserProfile={setuserProfile} />\r\n      <div className=\"content\">\r\n        <div className=\"sidebar-group\">\r\n          <ChatSidebar\r\n            clicked={clicked}\r\n            setClicked={setClicked}\r\n            response={response}\r\n            ArchiveChat={ArchiveChat}\r\n            profiledata={profiledata}\r\n            // setuserProfile={setuserProfile}\r\n          />\r\n          <ArchiveSidebar\r\n            clicked={clicked}\r\n            setClicked={setClicked}\r\n            response={response}\r\n          />\r\n          <FriendSidebar />\r\n          <FavoriteSidebar />\r\n        </div>\r\n        <ChatBody\r\n          messages={chatMessages}\r\n          SendMessage={SendMessage}\r\n          my_uid={my_uid}\r\n          clicked={clicked}\r\n        />\r\n        <Profile userProfile={userProfile} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Workspace;\r\n"]},"metadata":{},"sourceType":"module"}